{"version":3,"file":"ltiform.min.js","sources":["../src/ltiform.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * AMD module for the lti form in assignsubmission_ltisubmissions page.\r\n *\r\n * @module     assignsubmission_ltisubmissions/ltiform\r\n * @copyright  2023 Moodle India\r\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\nimport $ from 'jquery';\r\nimport {get_string as getString} from 'core/str';\r\nexport const init = (hideoptions) => {\r\n    $(document).on('click', '#id_assignsubmission_ltisubmissions_enabled', function(){\r\n        var ltisubmissionname = $(this).attr('name');\r\n        if($(this).is(':checked')){\r\n            $('#fgroup_id_submissionplugins').find(':checkbox').each(function(){\r\n                var elementname = $(this).attr('name');\r\n                if(ltisubmissionname != elementname &&\r\n                elementname.startsWith('assignsubmission_') && elementname.endsWith('_enabled')){\r\n                    if($(this).is(':checked')){\r\n                        $(this).trigger('click');\r\n                    }\r\n                    $(this).attr('disabled', true);\r\n                }\r\n            });\r\n        }else{\r\n            $('#fgroup_id_submissionplugins').find(':checkbox').each(function(){\r\n                var elementname = $(this).attr('name');\r\n                if(ltisubmissionname != elementname && elementname.startsWith('assignsubmission_')\r\n                && elementname.endsWith('_enabled')){\r\n                    $(this).attr('disabled', false);\r\n                }\r\n            });\r\n        }\r\n    });\r\n    $(document).ready(function(){\r\n        if($('#id_assignsubmission_ltisubmissions_enabled').is(':checked')){\r\n            if(hideoptions){// cannot edit if the activity is once defined as of type ltisubmission\r\n                $('#fgroup_id_submissionplugins').hide();\r\n            }\r\n            var ltisubmissionname = $('#id_assignsubmission_ltisubmissions_enabled').attr('name');\r\n            $('#fgroup_id_submissionplugins').find(':checkbox').each(function(){\r\n                var elementname = $(this).attr('name');\r\n                if(ltisubmissionname != elementname && elementname.startsWith('assignsubmission_')\r\n                && elementname.endsWith('_enabled')){\r\n                    if($(this).is(':checked')){\r\n                        $(this).trigger('click');\r\n                    }\r\n                    $(this).attr('disabled', true);\r\n                }\r\n            });\r\n        }\r\n    });\r\n    $(document).find(\"form[action='modedit.php']\").on( \"submit\", function() {\r\n        var formData = $(this).serializeArray();\r\n        var data = [];\r\n        $.each(formData, function(index, field){\r\n            data[field.name] = field.value;\r\n        });\r\n        if (data.assignsubmission_ltisubmissions_enabled == 1 && data.typeid == 0) {\r\n            $('#id_typeid').addClass('is-invalid');\r\n            getString('invalidtypeid', 'assignsubmission_ltisubmissions').then(function (error) {\r\n                $('#id_error_typeid').html(error);\r\n            }.bind(this));\r\n            document.getElementById(\"id_typeid\").scrollIntoView();\r\n            return false;\r\n        } else {\r\n            if($('#id_typeid').hasClass('is-invalid')) {\r\n                $('#id_typeid').removeClass('is-invalid');\r\n                $('#id_error_typeid').html('');\r\n            }\r\n            return true;\r\n        }\r\n    });\r\n};"],"names":["hideoptions","document","on","ltisubmissionname","this","attr","is","find","each","elementname","startsWith","endsWith","trigger","ready","hide","formData","serializeArray","data","index","field","name","value","assignsubmission_ltisubmissions_enabled","typeid","addClass","then","error","html","bind","getElementById","scrollIntoView","hasClass","removeClass"],"mappings":";;;;;;;wJAwBqBA,kCACfC,UAAUC,GAAG,QAAS,+CAA+C,eAC/DC,mBAAoB,mBAAEC,MAAMC,KAAK,SAClC,mBAAED,MAAME,GAAG,gCACR,gCAAgCC,KAAK,aAAaC,MAAK,eACjDC,aAAc,mBAAEL,MAAMC,KAAK,QAC5BF,mBAAqBM,aACxBA,YAAYC,WAAW,sBAAwBD,YAAYE,SAAS,eAC7D,mBAAEP,MAAME,GAAG,iCACRF,MAAMQ,QAAQ,6BAElBR,MAAMC,KAAK,YAAY,2BAI/B,gCAAgCE,KAAK,aAAaC,MAAK,eACjDC,aAAc,mBAAEL,MAAMC,KAAK,QAC5BF,mBAAqBM,aAAeA,YAAYC,WAAW,sBAC3DD,YAAYE,SAAS,iCAClBP,MAAMC,KAAK,YAAY,6BAKvCJ,UAAUY,OAAM,eACX,mBAAE,+CAA+CP,GAAG,YAAY,CAC5DN,iCACG,gCAAgCc,WAElCX,mBAAoB,mBAAE,+CAA+CE,KAAK,4BAC5E,gCAAgCE,KAAK,aAAaC,MAAK,eACjDC,aAAc,mBAAEL,MAAMC,KAAK,QAC5BF,mBAAqBM,aAAeA,YAAYC,WAAW,sBAC3DD,YAAYE,SAAS,eACjB,mBAAEP,MAAME,GAAG,iCACRF,MAAMQ,QAAQ,6BAElBR,MAAMC,KAAK,YAAY,+BAKvCJ,UAAUM,KAAK,8BAA8BL,GAAI,UAAU,eACrDa,UAAW,mBAAEX,MAAMY,iBACnBC,KAAO,0BACTT,KAAKO,UAAU,SAASG,MAAOC,OAC7BF,KAAKE,MAAMC,MAAQD,MAAME,SAEuB,GAAhDJ,KAAKK,yCAA+D,GAAfL,KAAKM,4BACxD,cAAcC,SAAS,kCACf,gBAAiB,mCAAmCC,KAAK,SAAUC,2BACvE,oBAAoBC,KAAKD,QAC7BE,KAAKxB,OACPH,SAAS4B,eAAe,aAAaC,kBAC9B,KAEJ,mBAAE,cAAcC,SAAS,oCACtB,cAAcC,YAAY,kCAC1B,oBAAoBL,KAAK,MAExB"}